mandatory: True
code: |
  interview_metadata # make sure we initialize the object
  if not defined("interview_metadata['Housing_Temporary_Restraining_Order0002']"):
    interview_metadata.initializeObject('Housing_Temporary_Restraining_Order0002')
  interview_metadata['Housing_Temporary_Restraining_Order0002'].update({
    'title': 'Housing temporary restraining order',
    'short title': 'Housing TRO',
    'description': 'This form lets you ask the court for emergency help if your landlord is not fixing bad conditions in your apartment, your utilities are shut off, or your landlord is doing something else to breach your right to "quiet enjoyment" of your home.',
    'original_form': 'https://www.masslegalhelp.org/housing/lt1-form-15-tro.pdf',
    'allowed courts': [
      'Boston Municipal Court',
      'District Court',
      'Housing Court',
      'Superior Court',
    ],
    'preferred court': 'Housing Court',
    'categories': [
      'Housing',
    ],
    'logic block variable': 'Housing_Temporary_Restraining_Order0002',
    'attachment block variable': 'Housing_Temporary_Restraining_Order0002_attachment',
    'typical role': 'plaintiff',  })
---
question: |
  How did this harm you?
subquestion: |
  Be specific about up to three expenses you had because of your landlord's actions or failure to act.
fields:
  - 'First expense': incident1_item
  - 'Cost': incident1_item_cost
    datatype: currency
  - 'Second expense': incident2_item
  - 'Cost': incident2_item_cost
    datatype: currency
  - 'Third expense': incident3_item
  - 'Cost': incident3_item_cost
    datatype: currency
---
question: |
  How much is the landlord liable for?
subquestion: |
  Your landlord may be liable for 3 times your monthly rent, or the actual amount you paid because of your landlord's actions or failure to act. The court should give you whichever amount is larger.
fields:
  - 'Amount': landlord_liable_amount
---
question: |
  Screen five
subquestion: |
  Leftovers
fields:
  - 'What county is the court in?': court_county
  - 'User phone  2': user_phone__2
  - 'User name full  3': user_name_full__3
---
question: |
  What are you asking the court to do?
subquestion: |
  You can select any of the below actions.
fields:
  - 'Let me back into the apartment': requested_action_deny_possession
    datatype: yesno
  - 'Provide me utilities': requested_action_deprive_utility
    datatype: yesno
  - 'Stop breaching my quiet enjoyment': requested_action_quiet_enjoyment
    datatype: yesno
---
question: |
  Your landlord's actions
subquestion: |
  This form allows you to get emergency help for something your landlord did or failed to do. Please give us some information about what your landlord did.
fields:
  - 'When did this take place?': incident_date
    datatype: date
  - 'My landlord illegally locked me out of the apartment': incident_locked_out
    datatype: yesno
  - 'My utilities were shut off': incident_utility
    datatype: yesno
  - 'Explain': incident_utility_description
  - 'Other breach of quiet enjoyment': incident_other
    datatype: yesno
  - 'Describe': incident_other_description
---
mandatory: True
question: |
  Placeholder download screen
subquestion: |
  Placeholder
buttons:
  - Exit: exit
  - Restart: restart
attachment code: Housing_Temporary_Restraining_Order0002_attachment
---
need: Housing_Temporary_Restraining_Order0002
attachment:
    variable name: Housing_Temporary_Restraining_Order0002_attachment
    name: Housing TRO
    filename: Housing_TRO
    pdf template file: Housing_Temporary_Restraining_Order.pdf
    fields: 
      - "court_name": ${ courts[0] }
      - "plaintiff": ${ plaintiff }
      - "docket_number": ${ docket_numbers[0] }
      - "defendant": ${ str(defendants) }
      - "user_name_full": ${ str(users[0]) }
      - "user_address_on_one_line": ${ users[0].address.on_one_line() }
      - "user_phone": ${ users[0].phone_number }
      - "other_party_name_full": ${ str(other_parties[0]) }
      - "other_party_address_on_one_line": ${ other_parties[0].address.on_one_line() }
      - "other_party_phone": ${ other_parties[0].phone_number }
      - "user_signature": ${ users[0].signature }
      - "user_address_on_one_line": ${ users[0].address.on_one_line() }
      - "user_email": ${ users[0].email }
      - "signature_date": ${ signature_date }
      - "court_county": ${ court_county }
      - "incident_date": ${ incident_date }
      - "incident_locked_out": ${ incident_locked_out }
      - "incident_utility": ${ incident_utility }
      - "incident_utility_description": ${ incident_utility_description }
      - "incident_other": ${ incident_other }
      - "incident_other_description": ${ incident_other_description }
      - "incident1_item": ${ incident1_item }
      - "incident1_item_cost": ${ currency(incident1_item_cost ) }
      - "incident2_item": ${ incident2_item }
      - "incident2_item_cost": ${ currency(incident2_item_cost ) }
      - "incident3_item": ${ incident3_item }
      - "incident3_item_cost": ${ currency(incident3_item_cost ) }
      - "landlord_liable_amount": ${ landlord_liable_amount }
      - "requested_action_deny_possession": ${ requested_action_deny_possession }
      - "requested_action_deprive_utility": ${ requested_action_deprive_utility }
      - "requested_action_quiet_enjoyment": ${ requested_action_quiet_enjoyment }
      - "user_phone__2": ${ user_phone__2 }
      - "user_name_full__3": ${ user_name_full__3 }
      - "user_name_full__2": ${ user_name_full__2 }
      - "user_signature_verification": ${ user_signature_verification }
---
variable name: interview_metadata['Housing_Temporary_Restraining_Order0002']['built_in_fields_used']
data:
  - variable: court_name
  - variable: plaintiff
  - variable: docket_number
  - variable: defendant
  - variable: user_name_full
  - variable: user_address_on_one_line
  - variable: user_phone
  - variable: other_party_name_full
  - variable: other_party_address_on_one_line
  - variable: other_party_phone
  - variable: user_signature
  - variable: user_address_on_one_line
  - variable: user_email
  - variable: signature_date
---
variable name: interview_metadata['Housing_Temporary_Restraining_Order0002']['field_list']
data:
  - variable: court_county
    field_type: text
    field_data_type: text
  - variable: incident_date
    field_type: text
    field_data_type: date
  - variable: incident_locked_out
    field_type: yesno
  - variable: incident_utility
    field_type: yesno
  - variable: incident_utility_description
    field_type: text
    field_data_type: text
  - variable: incident_other
    field_type: yesno
  - variable: incident_other_description
    field_type: text
    field_data_type: text
  - variable: incident1_item
    field_type: text
    field_data_type: text
  - variable: incident1_item_cost
    field_type: text
    field_data_type: currency
  - variable: incident2_item
    field_type: text
    field_data_type: text
  - variable: incident2_item_cost
    field_type: text
    field_data_type: currency
  - variable: incident3_item
    field_type: text
    field_data_type: text
  - variable: incident3_item_cost
    field_type: text
    field_data_type: currency
  - variable: landlord_liable_amount
    field_type: text
    field_data_type: text
  - variable: requested_action_deny_possession
    field_type: yesno
  - variable: requested_action_deprive_utility
    field_type: yesno
  - variable: requested_action_quiet_enjoyment
    field_type: yesno
  - variable: user_phone__2
    field_type: text
    field_data_type: text
  - variable: user_name_full__3
    field_type: text
    field_data_type: text
  - variable: user_name_full__2
  - variable: user_signature_verification
---
include:
  - docassemble.MAVirtualCourt:basic-questions.yml
---
comment: |
  This question is used to introduce your interview. Please customize
continue button field: Housing_Temporary_Restraining_Order0002_intro
question: |
  Housing temporary restraining order
subquestion: |
  This form lets you ask the court for emergency help if your landlord is not fixing bad conditions in your apartment, your utilities are shut off, or your landlord is doing something else to breach your right to "quiet enjoyment" of your home.
---
id: Housing_Temporary_Restraining_Order0002
code: |
  # This is a placeholder to control logic flow in this interview
  # It was generated from interview_generator.py as an 'interview order' type question.  # We list one variable from each screen here, in order to control the order of questions
  # To change the order, you can rearrange, or make conditional. If you make conditional here,
  # You must also make sure it's conditional in the attachment block, or assign each variable 
  # on the optional screen to DAEmpty() 
  basic_questions_intro_screen 
  Housing_Temporary_Restraining_Order0002_intro
  incident_date
  incident1_item
  landlord_liable_amount
  requested_action_deny_possession
  court_county
  courts[0]
  plaintiff
  docket_numbers[0]
  str(defendants)
  str(users[0])
  users[0].address.on_one_line()
  users[0].phone_number
  str(other_parties[0])
  other_parties[0].address.on_one_line()
  other_parties[0].phone_number
  users[0].address.on_one_line()
  users[0].email
  signature_date
  # By default, we'll mark any un-filled fields as DAEmpty(). This helps avoid errors if you intentionally hide a logic branch or mark a question not required
  # Comment out the line below if you don't want this behavior. 
  mark_unfilled_fields_empty(interview_metadata["Housing_Temporary_Restraining_Order0002"])
  Housing_Temporary_Restraining_Order0002_preview_question # Pre-canned preview screen
  basic_questions_signature_flow
  users[0].signature
  Housing_Temporary_Restraining_Order0002 = True
---
continue button field: Housing_Temporary_Restraining_Order0002_preview_question
question: |
  Placeholder preview screen
subquestion: |
  Here is a preview of the form you'll sign on the next page. 
  
   ${Housing_Temporary_Restraining_Order0002_attachment_preview}
---
attachment:
    variable name: Housing_Temporary_Restraining_Order0002_attachment_preview
    name: Housing TRO
    filename: Housing_TRO
    pdf template file: Housing_Temporary_Restraining_Order.pdf
    fields: 
      - "court_name": ${ courts[0] }
      - "plaintiff": ${ plaintiff }
      - "docket_number": ${ docket_numbers[0] }
      - "defendant": ${ str(defendants) }
      - "user_name_full": ${ str(users[0]) }
      - "user_address_on_one_line": ${ users[0].address.on_one_line() }
      - "user_phone": ${ users[0].phone_number }
      - "other_party_name_full": ${ str(other_parties[0]) }
      - "other_party_address_on_one_line": ${ other_parties[0].address.on_one_line() }
      - "other_party_phone": ${ other_parties[0].phone_number }
      - "user_signature": ${ users[0].signature }
      - "user_address_on_one_line": ${ users[0].address.on_one_line() }
      - "user_email": ${ users[0].email }
      - "signature_date": ${ signature_date }
      - "court_county": ${ court_county }
      - "incident_date": ${ incident_date }
      - "incident_locked_out": ${ incident_locked_out }
      - "incident_utility": ${ incident_utility }
      - "incident_utility_description": ${ incident_utility_description }
      - "incident_other": ${ incident_other }
      - "incident_other_description": ${ incident_other_description }
      - "incident1_item": ${ incident1_item }
      - "incident1_item_cost": ${ currency(incident1_item_cost ) }
      - "incident2_item": ${ incident2_item }
      - "incident2_item_cost": ${ currency(incident2_item_cost ) }
      - "incident3_item": ${ incident3_item }
      - "incident3_item_cost": ${ currency(incident3_item_cost ) }
      - "landlord_liable_amount": ${ landlord_liable_amount }
      - "requested_action_deny_possession": ${ requested_action_deny_possession }
      - "requested_action_deprive_utility": ${ requested_action_deprive_utility }
      - "requested_action_quiet_enjoyment": ${ requested_action_quiet_enjoyment }
      - "user_phone__2": ${ user_phone__2 }
      - "user_name_full__3": ${ user_name_full__3 }
